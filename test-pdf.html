<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PDF.js Viewer</title>

  <!-- Classic pdf.js build from CDN (2.x series) -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"
    integrity="sha512-iI3sK3JA9DFrZf2ngYM0vtaLtRAI572F6yJG+v5NQ85nRZaRrHziB3+gOsJs7mYgJP8Z4Xqv3QnOTyt3/i9AjQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer">
  </script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #ddd;
    }
    #pdf-container {
      width: 100vw;
      height: 100vh;
      overflow: auto;
      background: #eee;
    }
    canvas {
      display: block;
      margin: 1rem auto;
      background: white;
      box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
    }
    #status {
      position: fixed;
      top: 0.5rem;
      left: 0.5rem;
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
      font-size: 0.8rem;
      z-index: 10;
    }
  </style>
</head>
<body>
  <div id="status">Loading PDF...</div>
  <div id="pdf-container"></div>

  <script>
    // URL of the PDF to load
    const pdfUrl = "https://training.electionofficers.com/test/What-Ifs_March_2025.pdf";

    const statusEl = document.getElementById("status");
    const container = document.getElementById("pdf-container");

    // Configure pdf.js worker
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";

    // Load the PDF
    pdfjsLib.getDocument(pdfUrl).promise.then(function (pdf) {
      statusEl.textContent = "Rendering " + pdf.numPages + " pages...";

      const renderPage = function (pageNum) {
        pdf.getPage(pageNum).then(function (page) {
          const viewport = page.getViewport({ scale: 1.2 });

          const canvas = document.createElement("canvas");
          const context = canvas.getContext("2d");

          canvas.width = viewport.width;
          canvas.height = viewport.height;
          container.appendChild(canvas);

          const renderContext = {
            canvasContext: context,
            viewport: viewport
          };

          page.render(renderContext).promise.then(function () {
            if (pageNum === pdf.numPages) {
              statusEl.textContent = "Done";
              setTimeout(function () {
                statusEl.style.display = "none";
              }, 1000);
            }
          });
        });
      };

      // Render all pages
      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
        renderPage(pageNum);
      }
    }).catch(function (error) {
      console.error("Error loading PDF:", error);
      statusEl.textContent = "Error loading PDF. See console for details. " +
        (error && error.message ? error.message : "");
    });
  </script>
</body>
</html>

